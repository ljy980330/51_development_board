/*********************************************************************************************************
*名称：delay.c
*功能：延迟功能所用到的函数
创建时间：2019/7/8
修改时间：2019/7/11
作者：黄彦钊
*********************************************************************************************************/	
#include <intrins.h>
#include "delay.h"	
/*******************************************************************************
* 函 数 名         : delay_ms
* 函数功能		   : 延时函数，i=1时，大约延时1ms
*******************************************************************************/
void delay_ms(uint n)
{
	uint  i,j;
	for(i=0;i<n;i++)
		for(j=0;j<123;j++);
}		 
/*******************************************************************************
* 函 数 名         : delay_us
* 函数功能		   : 非固定的延时函数，一般用来满足时序，i=1时，大约延时1us
*******************************************************************************/
void delay_us(uint n)
{
	while(n--);
}	
/*******************************************************************************
* 函 数 名         : nop
* 函数功能		   : 延时函数，当晶振为12HZ，i=1时，大约延时2us
*******************************************************************************/
void nop(uint n)
{	  
	uint i;
	for(i=0;i<n;i++)
	{
	   _nop_();
	}
}

/*******************************************************************************
* 函 数 名         : Delay_20ms
* 函数功能		   : 延时函数，20Ms的延时
*******************************************************************************/

void Delay_20ms()//@12.000MHz
{
	uchar i,j,k;
	i=1;
	j=234;
	k=113;
	do
	{
		do
		{
			while(--k);
		}
	  while(--j);
	}while(--i);
}


/*******************************************************************************
* 函 数 名         : Delay_30us
* 函数功能		   : 延时函数，30us的延时
*******************************************************************************/

void Delay_30us()//@12.000MHz
{
	uchar i;
	i=87;
	while(--i);
}

/*******************************************************************************
* 函 数 名         : Delay_1s
* 函数功能		   : 延时函数，1s的延时
*******************************************************************************/

void Delay_1s()//@12.000MHz
{
	uchar i,j,k;
	i=46;
	j=153;
	k=245;
	do
	{
		do
		{
			while(--k);
		}
	  while(--j);
	}while(--i);
}