C51 COMPILER V9.00   STEPPERMOTOR                                                          07/26/2019 21:38:13 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE STEPPERMOTOR
OBJECT MODULE PLACED IN .\Objects\stepperMotor.obj
COMPILER INVOKED BY: F:\workApp\Keil_v5\C51\BIN\C51.EXE stepperMotor\stepperMotor.c BROWSE DEBUG OBJECTEXTEND PRINT(.\Li
                    -stings\stepperMotor.lst) OBJECT(.\Objects\stepperMotor.obj)

line level    source

   1          /*****************************/
   2          /*  此程序用于步进电机       */
   3          /*      修改时间：2019年7月7日   */
   4          /*      作者：曾思茹                     */
   5          /*****************************/
   6          
   7          #include <STC12C5A.H>                     
   8          #include "config.h"                       
   9          #include "delay/delay.h"
  10          
  11          #define speed 200 //宏定义延时函数要使用的大小
  12          
  13          sbit a=P2^3;
  14          sbit b=P2^4;
  15          sbit c=P2^5;
  16          sbit d=P2^6;     //给管口命名
  17          
  18          
  19          
  20          
  21          /************************************/
  22          /*      转动函数                                                */
  23          /*      函数名：A_run B_run C_run D_run */
  24          /*  正转A-B-C-D 反转D-C-B-A             */
  25          /************************************/
  26          void A_run()
  27          {
  28   1              a=1;
  29   1              b=0;
  30   1              c=0;
  31   1              d=0;
  32   1      }
  33          
  34          void B_run()
  35          {
  36   1              a=0;
  37   1              b=1;
  38   1              c=0;
  39   1              d=0;
  40   1      }
  41          
  42          void C_run()
  43          {       
  44   1              a=0;
  45   1              b=0;
  46   1              c=1;
  47   1              d=0;
  48   1      }
  49          void D_run()
  50          {
  51   1              a=0;
  52   1              b=0;
  53   1              c=0;
  54   1              d=1;
C51 COMPILER V9.00   STEPPERMOTOR                                                          07/26/2019 21:38:13 PAGE 2   

  55   1      }
  56          void run()
  57          {
  58   1                      
  59   1              P1=0x00;  //0000 0000   将所有的IO关闭
  60   1              A_run();                  //A相通电，其他相断电
  61   1              delay_ms(10);
  62   1              B_run();                  //B相通电，其他相断电
  63   1              delay_ms(10);
  64   1              C_run();                  //C相通电，其他相断电
  65   1              delay_ms(10);
  66   1              D_run();                  //D相通电，其他相断电
  67   1              delay_ms(10);
  68   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     78    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
