C51 COMPILER V9.01   MAIN                                                                  07/07/2019 22:30:31 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: F:\KEIL4\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /*****************************/
   2          /*  此程序用于步进电机       */
   3          /*      修改时间：2019年7月7日   */
   4          /*      作者：曾思茹                     */
   5          /*****************************/
   6          
   7          #include <STC12C5A.H>
   8          #define speed 200 //宏定义延时函数要使用的大小
   9          
  10          sbit a=P2^3;
  11          sbit b=P2^4;
  12          sbit c=P2^5;
  13          sbit d=P2^6;     //给管口命名
  14          
  15          
  16          
  17          /*******************************/
  18          /*              延时函数                           */
  19          /*                                                         */
  20          /*******************************/
  21          void delay10ms()   //误差 -0.000000000001us
  22          {
  23   1          unsigned char a,b,c;
  24   1          for(c=193;c>0;c--)
  25   1              for(b=114;b>0;b--)
  26   1                  for(a=1;a>0;a--);
  27   1      }
  28          
  29          
  30          /************************************/
  31          /*      转动函数                                                */
  32          /*      函数名：A_run B_run C_run D_run */
  33          /*  正转A-B-C-D 反转D-C-B-A             */
  34          /************************************/
  35          void A_run()
  36          {
  37   1              a=1;
  38   1              b=0;
  39   1              c=0;
  40   1              d=0;
  41   1      }
  42          
  43          void B_run()
  44          {
  45   1              a=0;
  46   1              b=1;
  47   1              c=0;
  48   1              d=0;
  49   1      }
  50          
  51          void C_run()
  52          {       
  53   1              a=0;
  54   1              b=0;
  55   1              c=1;
C51 COMPILER V9.01   MAIN                                                                  07/07/2019 22:30:31 PAGE 2   

  56   1              d=0;
  57   1      }
  58          void D_run()
  59          {
  60   1              a=0;
  61   1              b=0;
  62   1              c=0;
  63   1              d=1;
  64   1      }
  65          /************************************/
  66          /*                                                                      */
  67          /*                      主函数                                  */
  68          /************************************/
  69          
  70          void main()
  71          {
  72   1              while(1)
  73   1              {               
  74   2                      P1=0x00;  //0000 0000   将所有的IO关闭
  75   2                      A_run();                  //A相通电，其他相断电
  76   2                      delay10ms();
  77   2                      B_run();                  //B相通电，其他相断电
  78   2                      delay10ms();
  79   2                      C_run();                  //C相通电，其他相断电
  80   2                      delay10ms();
  81   2                      D_run();                  //D相通电，其他相断电
  82   2                      delay10ms();
  83   2              }
  84   1              /*延时函数的作用是防止电机转动过快*/
  85   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     78    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
