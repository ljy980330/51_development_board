C51 COMPILER V9.01   MAIN                                                                  07/06/2019 21:02:31 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: F:\KEIL4\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /*    此程序用于步进电机       */
   2          /*                             */
   3          /*修改时间：2019/6/2           */
   4          
   5          
   6          #include <STC12C5A.H>
   7          #define speed 200 //宏定义延时函数要使用的大小
   8          
   9          sbit a=P2^3;
  10          sbit b=P2^4;
  11          sbit c=P2^5;
  12          sbit d=P2^6;     //给管口命名
  13          
  14          
  15          
  16          /*******************************/
  17          /*              延时函数
  18          /*
  19          /*******************************/
  20          void delay10ms()   //误差 -0.000000000001us
  21          {
  22   1          unsigned char a,b,c;
  23   1          for(c=193;c>0;c--)
  24   1              for(b=114;b>0;b--)
  25   1                  for(a=1;a>0;a--);
  26   1      }
  27          
  28          
  29          /************************************/
  30          /*      转动函数
  31                  函数名：A_run B_run C_run D_run
  32                  正转A-B-C-D 反转D-C-B-A                 */
  33          /************************************/
  34          void A_run()
  35          {
  36   1              a=1;
  37   1              b=0;
  38   1              c=0;
  39   1              d=0;
  40   1      }
  41          
  42          void B_run()
  43          {
  44   1              a=0;
  45   1              b=1;
  46   1              c=0;
  47   1              d=0;
  48   1      }
  49          
  50          void C_run()
  51          {       
  52   1              a=0;
  53   1              b=0;
  54   1              c=1;
  55   1              d=0;
C51 COMPILER V9.01   MAIN                                                                  07/06/2019 21:02:31 PAGE 2   

  56   1      }
  57          void D_run()
  58          {
  59   1              a=0;
  60   1              b=0;
  61   1              c=0;
  62   1              d=1;
  63   1      }
  64          /************************************/
  65          /*
  66          /*                      主函数  
  67          /************************************/
  68          
  69          void main()
  70          {
  71   1              while(1)
  72   1              {               
  73   2                      P1=0x00;  //0000 0000   将所有的IO关闭
  74   2                      A_run();                  //A相通电，其他相断电
  75   2                      delay10ms();
  76   2                      B_run();                  //B相通电，其他相断电
  77   2                      delay10ms();
  78   2                      C_run();                  //C相通电，其他相断电
  79   2                      delay10ms();
  80   2                      D_run();                  //D相通电，其他相断电
  81   2                      delay10ms();
  82   2              }
  83   1              /*延时函数的作用是防止电机转动过快*/
  84   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     78    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
