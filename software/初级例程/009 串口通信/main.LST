C51 COMPILER V9.00   MAIN                                                                  07/25/2019 20:31:26 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: F:\workApp\Keil_v5\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /**************************************************************************************
   2          *                             串口通信实验                                                                                                *
   3          实现现象：下载程序后打开串口调试助手，将波特率设置为4800，选择发送的数据就可以显示
   4                                  在串口助手上。
   5          注意事项：无。                                                                                                                                                            
   6          ***************************************************************************************/
   7          
   8          #include "reg52.h"                       //此文件中定义了单片机的一些特殊功能寄存器
   9          
  10          typedef unsigned int u16;         //对数据类型进行声明定义
  11          typedef unsigned char u8;
  12          
  13          
  14          /*******************************************************************************
  15          * 函数名         :UsartInit()
  16          * 函数功能                 :设置串口
  17          * 输入           : 无
  18          * 输出           : 无
  19          *******************************************************************************/
  20          void UsartInit()
  21          {
  22   1          PCON &= 0x7F;     //波特率不倍速
  23   1          SCON = 0x50;      //8位数据,可变波特率
  24   1          AUXR |= 0x04;     //独立波特率发生器时钟为Fosc,即1T
*** ERROR C202 IN LINE 24 OF MAIN.C: 'AUXR': undefined identifier
  25   1          BRT = 0xFD;       //设定独立波特率发生器重装值
*** ERROR C202 IN LINE 25 OF MAIN.C: 'BRT': undefined identifier
  26   1          AUXR |= 0x01;     //串口1选择独立波特率发生器为波特率发生器
*** ERROR C202 IN LINE 26 OF MAIN.C: 'AUXR': undefined identifier
  27   1          AUXR |= 0x10;     //启动独立波特率发生器
*** ERROR C202 IN LINE 27 OF MAIN.C: 'AUXR': undefined identifier
  28   1              ES=1;                                           //打开接收中断
  29   1              EA=1;                                           //打开总中断
  30   1              TR1=1;                                  //打开计数器
  31   1      }
  32          
  33          /*******************************************************************************
  34          * 函 数 名       : main
  35          * 函数功能               : 主函数
  36          * 输    入       : 无
  37          * 输    出       : 无
  38          *******************************************************************************/
  39          void main()
  40          {       
  41   1              UsartInit();  //        串口初始化
  42   1              while(1);               
  43   1      }
  44          
  45          /*******************************************************************************
  46          * 函数名         : Usart() interrupt 4
  47          * 函数功能                : 串口通信中断函数
  48          * 输入           : 无
  49          * 输出           : 无
  50          *******************************************************************************/
  51          void Usart() interrupt 4
C51 COMPILER V9.00   MAIN                                                                  07/25/2019 20:31:26 PAGE 2   

  52          {
  53   1              u8 receiveData;
  54   1      
  55   1              receiveData=SBUF;//出去接收到的数据
  56   1              RI = 0;//清除接收中断标志位
  57   1              SBUF=receiveData;//将接收到的数据放入到发送寄存器
  58   1              while(!TI);                      //等待发送数据完成
  59   1              TI=0;                                            //清除发送完成标志位
  60   1      }

C51 COMPILATION COMPLETE.  0 WARNING(S),  4 ERROR(S)
