/*********************************************************************************************************
*名称：interrupt.h
*功能：外部中断函数
创建时间：2019/7/5
修改时间：2019/7/5
作者：黄剑桥
*********************************************************************************************************/
#include "interrupt.h"

/*******************************************************************************************************
**函数：Int0Init
**功能：设置外部中断
** 配置外部中断0模式：EX0 
** 	                   0	低电平触发方式
**					   1	下降沿触发方式
***********************************************************************************************************/
void Int0Init()
{

	IT0 = 1;					 //设置外部中断0为下降沿触发方式
	EX0 = 1;					 //允许外部中断0中断
	EA  = 1;						 //打开总中断
}

/*******************************************************************************************************
**函数：time0
**功能：外部中断0对应的服务程序
**      中断0由按键key1控制触发
***********************************************************************************************************/

void time0() interrupt 0
{
   	EX0 = 0;
	Delay_us(200); //延时消抖
	if(key1==0)
	{
		Delay_us(200);	 //延时消抖
		if(key1==0)
		{
			LED1=0;
	        LED2=0;  //根据真值表点亮第一个LED
	        LED3=0;		
		}
	}
	EX0 = 1;	 //允许外部中断0中断
}
/*******************************************************************************************************
**函数：time1
**功能：外部中断1对应的服务程序
        中断1由按键key2控制触发       
***********************************************************************************************************/
void time1() interrupt 2
{
    if(key2==0)
	{
    Delay_us(200);
    if(key2==0)			 //按下按键 蜂鸣器发声
    {
	  buzz=0;
	  Delay_us(2000);	  //延时
	  buzz=1;
	  Delay_us(2000);
   
    }
    }  
}
