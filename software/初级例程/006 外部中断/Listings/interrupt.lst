C51 COMPILER V9.01   INTERRUPT                                                             07/05/2019 13:51:48 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE INTERRUPT
OBJECT MODULE PLACED IN interrupt.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE int0\interrupt.c BROWSE DEBUG OBJECTEXTEND PRINT(.\interrupt.lst) OBJECT(in
                    -terrupt.obj)

line level    source

   1          /*********************************************************************************************************
   2          *名称：interrupt.h
   3          *功能：外部中断函数
   4          创建时间：2019/7/5
   5          修改时间：2019/7/5
   6          作者：黄剑桥
   7          *********************************************************************************************************/
   8          #include "interrupt.h"
   9          
  10          /*******************************************************************************************************
  11          **函数：Int0Init
  12          **功能：设置外部中断
  13          ** 配置外部中断0模式：EX0 
  14          **                         0    低电平触发方式
  15          **                                         1    下降沿触发方式
  16          **********************************************************************************************************
             -*/
  17          void Int0Init()
  18          {
  19   1      
  20   1              IT0 = 1;                                         //设置外部中断0为下降沿触发方式
  21   1              EX0 = 1;                                         //允许外部中断0中断
  22   1              EA  = 1;                                                 //打开总中断
  23   1      }
  24          
  25          /*******************************************************************************************************
  26          **函数：time0
  27          **功能：外部中断0对应的服务程序
  28          **      中断0由按键key1控制触发
  29          **********************************************************************************************************
             -*/
  30          
  31          void time0() interrupt 0
  32          {
  33   1              EX0 = 0;
  34   1              Delay_us(200); //延时消抖
  35   1              if(key1==0)
  36   1              {
  37   2                      Delay_us(200);   //延时消抖
  38   2                      if(key1==0)
  39   2                      {
  40   3                              LED1=0;
  41   3                      LED2=0;  //根据真值表点亮第一个LED
  42   3                      LED3=0;         
  43   3                      }
  44   2              }
  45   1              EX0 = 1;         //允许外部中断0中断
  46   1      }
  47          /*******************************************************************************************************
  48          **函数：time1
  49          **功能：外部中断1对应的服务程序
  50                  中断1由按键key2控制触发       
  51          **********************************************************************************************************
             -*/
C51 COMPILER V9.01   INTERRUPT                                                             07/05/2019 13:51:48 PAGE 2   

  52          void time1() interrupt 2
  53          {
  54   1          if(key2==0)
  55   1              {
  56   2          Delay_us(200);
  57   2          if(key2==0)                  //按下按键 蜂鸣器发声
  58   2          {
  59   3                buzz=0;
  60   3                Delay_us(2000);         //延时
  61   3                buzz=1;
  62   3                Delay_us(2000);
  63   3         
  64   3          }
  65   2          }  
  66   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    180    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
