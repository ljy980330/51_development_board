C51 COMPILER V9.00   LED                                                                   07/25/2019 22:18:56 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE LED
OBJECT MODULE PLACED IN .\Objects\led.obj
COMPILER INVOKED BY: F:\workApp\Keil_v5\C51\BIN\C51.EXE led\led.c BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\led.lst) OB
                    -JECT(.\Objects\led.obj)

line level    source

   1          #include "led.h"
   2           unsigned char code fseg[]={0xc0,0xf9,0xa4,0xb0,0x99,0x92,0x82,0xf8,0x80,0x90};
   3           unsigned char code segbit[]={0x80,0x40,0x20,0x10,0x08,0x04,0x02,0x01};
   4           unsigned char  disbuf[4]={0,0,0,0};
   5           //-----------------------------------------------------------------------------
   6          // 函数原形定义
   7          uchar LED[8];   //用于LED的8位显示缓存
   8          
   9          void LED4_Display ();                   // LED显示
  10          void LED_OUT(uchar X);                          // LED单字节串行移位函数
  11          
  12          unsigned char code LED_0F[];            // LED字模表
  13          
  14          sbit DIO = P1^0;                                //串行数据输入
  15          sbit RCLK  = P1^1;                              //时钟脉冲信号――上升沿有效
  16          sbit SCLK = P1^2;                               //打入信号――――上升沿有效
  17          
  18          
  19          void LED4_Display ()
  20          {
  21   1              unsigned char code *led_table;          // 查表指针
  22   1              uchar i;
  23   1              //显示第1位
  24   1              led_table = LED_0F + LED[0];
  25   1              i = *led_table;
  26   1      
  27   1              LED_OUT(i);                     
  28   1              LED_OUT(0x01);          
  29   1      
  30   1              RCLK = 0;
  31   1              RCLK = 1;
  32   1              //显示第2位
  33   1              led_table = LED_0F + LED[1];
  34   1              i = *led_table;
  35   1      
  36   1              LED_OUT(i);             
  37   1              LED_OUT(0x02);          
  38   1      
  39   1              RCLK = 0;
  40   1              RCLK = 1;
  41   1              //显示第3位
  42   1              led_table = LED_0F + LED[2];
  43   1              i = *led_table;
  44   1      
  45   1              LED_OUT(i);                     
  46   1              LED_OUT(0x04);  
  47   1      
  48   1              RCLK = 0;
  49   1              RCLK = 1;
  50   1              //显示第4位
  51   1              led_table = LED_0F + LED[3];
  52   1              i = *led_table;
  53   1      
  54   1              LED_OUT(i);                     
C51 COMPILER V9.00   LED                                                                   07/25/2019 22:18:56 PAGE 2   

  55   1              LED_OUT(0x08);          
  56   1      
  57   1              RCLK = 0;
  58   1              RCLK = 1;
  59   1      }
  60          
  61          void LED_OUT(uchar X)
  62          {
  63   1              uchar i;
  64   1              for(i=8;i>=1;i--)
  65   1              {
  66   2                      if (X&0x80) DIO=1; else DIO=0;
  67   2                      X<<=1;
  68   2                      SCLK = 0;
  69   2                      SCLK = 1;
  70   2              }
  71   1      }
  72          
  73          unsigned char code LED_0F[] = 
  74          {// 0    1        2        3    4        5        6        7    8        9        A        b    C    d    E    F    -
  75                  0xC0,0xF9,0xA4,0xB0,0x99,0x92,0x82,0xF8,0x80,0x90,0x8C,0xBF,0xC6,0xA1,0x86,0xFF,0xbf
  76          };
  77          
  78          
  79          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     98    ----
   CONSTANT SIZE    =     35    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     12    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
