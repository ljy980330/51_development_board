C51 COMPILER V9.00   SEND                                                                  07/14/2019 16:39:02 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE SEND
OBJECT MODULE PLACED IN .\Objects\send.obj
COMPILER INVOKED BY: F:\workApp\Keil_v5\C51\BIN\C51.EXE send\send.c BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\send.lst)
                    - OBJECT(.\Objects\send.obj)

line level    source

   1          #include"send.h"
   2                                                                                                     
   3          
   4          //1//sbit KEY1=P0^0;                    //·¢ËÍ°´¼ü 
   5          //1//sbit KEY2=P0^1;
   6          //1//sbit KEY3=P0^2;
   7          //1//sbit KEY4=P0^3;
   8          sbit beep=P2^3;                                 //À®°È 
   9          sbit LED6=P1^6;                                 //·¢ËÍÊý¾ÝÊ±ÏÔÊ¾µÆ+½ÓÊÕµ½Êý¾ÝºóµÄ¹¦ÄÜÊµÏÖµÆ
  10          
  11          uchar Tx_Buf1[]={1};                    //·¢ËÍµÄÐÅÏ¢1 
  12          uchar Rx_Buf[32];                               //½ÓÊÕµ½µÄÊý¾ÝÔÝ´æÆ÷£¬×î¶à32×Ö½ÚÊý¾Ý                      
  13                                           
  14          uchar uart_flag,a;                      //´®¿Ú½ÓÊÕ±êÖ¾¡¾ÊÕµ½Êý¾Ý¾ÍÖÃ1¡¿,aÎª½ÓÊÕµ½µÄÊý¾Ý
  15          
  16          /*------------------------------------------------
  17          mainº¯Êý
  18          ------------------------------------------------*/
  19          void run()
  20          {
  21   1               LED6=1;                                //³õÊ¼µÆ6Ï¨Ãð   
  22   1               uart_flag=0;                   //´®¿Ú±êÖ¾³õÊ¼Îª0
  23   1               init_NRF24L01();               //³õÊ¼»¯24L01
  24   1               UART_Init();           //³õÊ¼»¯´®¿Ú
  25   1      
  26   1               while(NRF24L01_Check())                                        //¼ì²é²»µ½24l01Ôò±¨¾¯ 
  27   1               {
  28   2                      beep=0;
  29   2                      delay_ms(200);
  30   2                      beep=1;
  31   2                      delay_ms(200);
  32   2               }
  33   1               while(1)
  34   1               {      
  35   2                      RX_Mode();                                                      //½ÓÊÕÄ£Ê½  
  36   2                      while(!nRF24L01_RxPacket(Rx_Buf))       //µÈ´ý½ÓÊÕÊý¾Ý,·µ»Ø1Ôò½ÓÊÕµ½Êý¾Ý,ÔÚµÈ´ý½ÓÊÕÊý¾ÝÆÚ¼ä,¿ÉÒÔËæÊ±±ä³É·¢ËÍÄ
             -£Ê½  
  37   2                  {
  38   3                              if(uart_flag==1)                                //µ±´®¿Ú½ÓÊÜ±êÖ¾Îª1±íÊ¾ÓÐÊý¾Ý¹ýÀ´
  39   3                              {
  40   4                                      ES=0;                                                   //¹Ø´®¿ÚÖÐ¶Ï
  41   4                              
  42   4                                      TX_Mode();                                              //·¢ËÍÄ£Ê½ 
  43   4                                      Tx_Buf1[0]=a-'0';                                       //½«´®¿ÚÊý¾Ý¸ø·¢ËÍ»º³åÇø
  44   4                                  nRF24L01_TxPacket(Tx_Buf1);         //·¢ËÍÃüÁîÊý¾Ý24L01
  45   4                                      UART_Send_Byte('O');                    //Ïò´®¿Ú·¢ËÍÒÑ¾­´«ËÍ
  46   4                                      UART_Send_Byte('K');
  47   4                                      UART_Send_Byte(':');
  48   4                                      UART_Send_Byte(a);
  49   4                                      UART_Send_Byte('\n');
  50   4                                      LED6=0;
  51   4                                  delay_ms(300);
  52   4                                      LED6=1;
  53   4                                  delay_ms(300);                                      //·¢ËÍºóLED1ÉÁÒ»ÏÂ 
C51 COMPILER V9.00   SEND                                                                  07/14/2019 16:39:02 PAGE 2   

  54   4      
  55   4                                      ES=1;                                                   //ÔÊÐí´®¿ÚÖÐ¶Ï
  56   4                                      uart_flag=0;                                    //ÖÐ¶Ï±êÖ¾Î»ÖÃ0
  57   4                                      break;                                                  //ÍË³ö×î½üµÄÑ­»·,´Ó¶ø±ä»Ø½ÓÊÕÄ£Ê½,Õâ¾ä¹Ø¼ü
  58   4                              }
  59   3                       }
  60   2                       if(Rx_Buf[0]==1)                                                       //Èô½ÓÊÕµ½¶ÔÓ¦µÄÊý¾ÝÔòÊµÏÖ¶ÔÓ¦¹¦ÄÜ 
  61   2                       {
  62   3                           Rx_Buf[0]=0;                               //Çå¿ÕÊý¾Ý 
  63   3                           LED6=0;
  64   3                               delay_ms(300);
  65   3                               LED6=1;
  66   3                               delay_ms(300);                         //½ÓÊÕµ½Êý¾Ý ºóÉÁË¸       
  67   3                       }
  68   2               }
  69   1      }
  70                                                            
  71          /*------------------------------------------------
  72          ´®¿Ú½ÓÊÕÖÐ¶Ï·þÎñ³ÌÐò
  73          ------------------------------------------------*/
  74          void UART() interrupt 4
  75          {
  76   1              if(RI)                          //¼ì²â½ÓÊÕÍê³É±êÖ¾Î»ÖÃ1
  77   1              {
  78   2                      RI=0;                   //ÇåÁã½ÓÊÕÍê³É±êÖ¾Î»
  79   2                      a=SBUF;                 //¶ÁÈ¡½ÓÊÕµ½µÄÊý¾Ý
  80   2                      uart_flag = 1;  //ÖÐ¶Ï±êÖ¾Î»ÖÃ1
  81   2              }
  82   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    165    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     35    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
