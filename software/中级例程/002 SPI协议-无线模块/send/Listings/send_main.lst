C51 COMPILER V9.00   SEND_MAIN                                                             07/14/2019 15:59:09 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE SEND_MAIN
OBJECT MODULE PLACED IN .\Objects\send_main.obj
COMPILER INVOKED BY: F:\workApp\Keil_v5\C51\BIN\C51.EXE send_main.c BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\send_main
                    -.lst) OBJECT(.\Objects\send_main.obj)

line level    source

   1          #include"includes.h"
   2          //1//sbit KEY1=P0^0;                    //·¢ËÍ°´¼ü 
   3          //1//sbit KEY2=P0^1;
   4          //1//sbit KEY3=P0^2;
   5          //1//sbit KEY4=P0^3;
   6          sbit beep=P2^3;                                 //À®°È 
   7          sbit LED6=P1^6;                                 //·¢ËÍÊý¾ÝÊ±ÏÔÊ¾µÆ+½ÓÊÕµ½Êý¾ÝºóµÄ¹¦ÄÜÊµÏÖµÆ
   8          
   9          uchar Tx_Buf1[]={1};                    //·¢ËÍµÄÐÅÏ¢1 
  10          uchar Rx_Buf[32];                               //½ÓÊÕµ½µÄÊý¾ÝÔÝ´æÆ÷£¬×î¶à32×Ö½ÚÊý¾Ý  
  11          uchar uart_flag,a;                      //´®¿Ú½ÓÊÕ±êÖ¾¡¾ÊÕµ½Êý¾Ý¾ÍÖÃ1¡¿,aÎª½ÓÊÕµ½µÄÊý¾Ý
  12          /*------------------------------------------------
  13          mainº¯Êý
  14          ------------------------------------------------*/
  15          void main()
  16          {
  17   1               LED6=1;                                //³õÊ¼µÆ6Ï¨Ãð   
  18   1               uart_flag=0;                   //´®¿Ú±êÖ¾³õÊ¼Îª0
  19   1               init_NRF24L01();               //³õÊ¼»¯24L01
  20   1               UART_Init();           //³õÊ¼»¯´®¿Ú
  21   1      
  22   1               while(NRF24L01_Check())                                        //¼ì²é²»µ½24l01Ôò±¨¾¯ 
  23   1               {
  24   2                      beep=0;
  25   2                      delay_ms(200);
  26   2                      beep=1;
  27   2                      delay_ms(200);
  28   2               }
  29   1               while(1)
  30   1               {      
  31   2                      RX_Mode();                                                      //½ÓÊÕÄ£Ê½  
  32   2                      while(!nRF24L01_RxPacket(Rx_Buf))       //µÈ´ý½ÓÊÕÊý¾Ý,·µ»Ø1Ôò½ÓÊÕµ½Êý¾Ý,ÔÚµÈ´ý½ÓÊÕÊý¾ÝÆÚ¼ä,¿ÉÒÔËæÊ±±ä³É·¢ËÍÄ
             -£Ê½  
  33   2                  {
  34   3                              if(uart_flag==1)                                //µ±´®¿Ú½ÓÊÜ±êÖ¾Îª1±íÊ¾ÓÐÊý¾Ý¹ýÀ´
  35   3                              {
  36   4                                      ES=0;                                                   //¹Ø´®¿ÚÖÐ¶Ï
  37   4                              
  38   4                                      TX_Mode();                                              //·¢ËÍÄ£Ê½ 
  39   4                                      Tx_Buf1[0]=a-'0';                                       //½«´®¿ÚÊý¾Ý¸ø·¢ËÍ»º³åÇø
  40   4                                  nRF24L01_TxPacket(Tx_Buf1);         //·¢ËÍÃüÁîÊý¾Ý24L01
  41   4                                      UART_Send_Byte('O');                    //Ïò´®¿Ú·¢ËÍÒÑ¾­´«ËÍ
  42   4                                      UART_Send_Byte('K');
  43   4                                      UART_Send_Byte(':');
  44   4                                      UART_Send_Byte(a);
  45   4                                      UART_Send_Byte('\n');
  46   4                                      LED6=0;
  47   4                                  delay_ms(300);
  48   4                                      LED6=1;
  49   4                                  delay_ms(300);                                      //·¢ËÍºóLED1ÉÁÒ»ÏÂ 
  50   4      
  51   4                                      ES=1;                                                   //ÔÊÐí´®¿ÚÖÐ¶Ï
  52   4                                      uart_flag=0;                                    //ÖÐ¶Ï±êÖ¾Î»ÖÃ0
  53   4                                      break;                                                  //ÍË³ö×î½üµÄÑ­»·,´Ó¶ø±ä»Ø½ÓÊÕÄ£Ê½,Õâ¾ä¹Ø¼ü
C51 COMPILER V9.00   SEND_MAIN                                                             07/14/2019 15:59:09 PAGE 2   

  54   4                              }
  55   3                       }
  56   2                       if(Rx_Buf[0]==1)                                                       //Èô½ÓÊÕµ½¶ÔÓ¦µÄÊý¾ÝÔòÊµÏÖ¶ÔÓ¦¹¦ÄÜ 
  57   2                       {
  58   3                           Rx_Buf[0]=0;                               //Çå¿ÕÊý¾Ý 
  59   3                           LED6=0;
  60   3                               delay_ms(300);
  61   3                               LED6=1;
  62   3                               delay_ms(300);                         //½ÓÊÕµ½Êý¾Ý ºóÉÁË¸       
  63   3                       }
  64   2               }
  65   1      }
  66                     
  67          /*------------------------------------------------
  68          ´®¿Ú½ÓÊÕÖÐ¶Ï·þÎñ³ÌÐò
  69          ------------------------------------------------*/
  70          void UART(void) interrupt 4
  71          {
  72   1              if(RI)                          //¼ì²â½ÓÊÕÍê³É±êÖ¾Î»ÖÃ1
  73   1              {
  74   2                      RI=0;                   //ÇåÁã½ÓÊÕÍê³É±êÖ¾Î»
  75   2                      a=SBUF;                 //¶ÁÈ¡½ÓÊÕµ½µÄÊý¾Ý
  76   2                      uart_flag = 1;  //ÖÐ¶Ï±êÖ¾Î»ÖÃ1
  77   2              }
  78   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    165    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     35    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
