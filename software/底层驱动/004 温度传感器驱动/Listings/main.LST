C51 COMPILER V9.00   MAIN                                                                  07/10/2019 20:15:47 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: D:\单片机\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /*********************************************************************************************************
   2          *名称：温湿度驱动
   3          *功能：串口发送温湿度数据
   4          创建时间：2019/7/6
   5          修改时间：2019/XX/XX
   6          作者：XXX
   7          **********************************************************************************************************
             -/
   8          
   9          #include "includes.h"
  10          
  11          U8  flag, k;
  12          U8  T_data_H, T_data_L, RH_data_H, RH_data_L, checkdata;
  13          U8  T_data_H_temp, T_data_L_temp, RH_data_H_temp, RH_data_L_temp, checkdata_temp;
  14          U8  comdata;
  15          U8  count, temp;
  16          U8  outdata[5];  //定义发送的字节数        
  17          U8  indata[5];
  18          U8  count, count_r = 0;
  19          U8  str[5] = {"RS232"};
  20          U16 temp1, temp2; 
  21          
  22          
  23          int main()
  24          {
  25   1              UART_Init();
  26   1              Delay_ms(1);
  27   1              
  28   1              while(1)
  29   1              {
  30   2                 Text();
  31   2              }       
  32   1      }
  33          
  34          
  35          void UART() interrupt 4 using 2
  36          {
  37   1              U8 InPut3;
  38   1              if(TI == 1) //发送中断    
  39   1              {
  40   2                      TI = 0;
  41   2                      if(count != 5) //发送完5位数据   
  42   2                      {
  43   3                              SBUF = outdata[count];
  44   3                              count++;
  45   3                      }
  46   2              }
  47   1      
  48   1              if(RI==1)        //接收中断               
  49   1              {       
  50   2                      InPut3 = SBUF;
  51   2                      indata[count_r] = InPut3;
  52   2                      count_r++;
  53   2                      RI=0;                                                            
  54   2                      if(count_r == 5)//接收完4位数据 
C51 COMPILER V9.00   MAIN                                                                  07/10/2019 20:15:47 PAGE 2   

  55   2                      { 
  56   3                      //数据接收完毕处理
  57   3                              count_r = 0;
  58   3                              str[0] = indata[0];
  59   3                              str[1] = indata[1];
  60   3                              str[2] = indata[2];
  61   3                              str[3] = indata[3];
  62   3                              str[4] = indata[4];
  63   3                              P0 = 0;
  64   3                      }
  65   2              }
  66   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     90    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     35    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
