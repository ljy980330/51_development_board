/*********************************************************************************************************
*名称：bludeTeeth.c
*功能：蓝牙模块所用到的函数
创建时间：2019/7/5
修改时间：2019/7/5
作者：黄彦钊
**********************************************************************************************************/
#include <STC12C5A.H>
#include "config.h"
	
uchar xdata buf;  
/*******************************************************************************
* 函 数 名         : BlueteethInit
* 函数功能		   : 蓝牙模块初始化
*******************************************************************************/
void BlueteethInit()
{
	SCON = 0x50;	//串口模式1，允许接收
	TMOD = 0x20;	//T1工作模式为2，自动重装
	PCON = 0x00;	//波特率不倍增

	REN = 1;

	TH1 = 0xfd;		//设置波特率为9600
	TL1 = 0xfd;
					   
	RI = 0;

	EA = 1;
	ES = 1;

	TR1 = 1;
}
												
/*******************************************************************************
* 函 数 名         : Serial
* 函数功能		   : 定时器
*******************************************************************************/
  
void Serial() interrupt 4
{
	buf = SBUF;
	RI = 0;	//读标志清零
	SBUF = buf;	//将内容返回到手机端，可在手机查看发送的内容
	while(!TI);
	TI = 0;	//写标志清零
}	  