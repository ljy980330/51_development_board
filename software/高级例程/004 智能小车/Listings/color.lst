C51 COMPILER V9.01   COLOR                                                                 07/09/2019 14:48:14 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE COLOR
OBJECT MODULE PLACED IN .\Objects\color.obj
COMPILER INVOKED BY: D:\cx\C51\BIN\C51.EXE color\color.c BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\color.lst) OBJECT(.\
                    -Objects\color.obj)

line level    source

   1          /*********************************************************************************************************
   2          *名称：color.c
   3          *功能：灯光功能所用到的函数
   4          创建时间：2019/7/8
   5          修改时间：2019/7/8
   6          作者：黄彦钊
   7          *********************************************************************************************************/
   8          
   9          #include <intrins.h>
  10          #include "color.h"      
  11          #include "delay/delay.h"
  12          sbit Send_Dat=P2^6;       
  13          uchar RGB_BUF[24];
  14          
  15          /*******************************************************************************
  16          * 函 数 名         : Send_A_bit
  17          * 函数功能                 : 闪烁灯
  18          *******************************************************************************/
  19          void Send_A_bit(unsigned char VAL)
  20          {
  21   1               if(VAL==1)
  22   1               {
  23   2                  Send_Dat=1;
  24   2                      nop(3);
  25   2                      Send_Dat=0;
  26   2                      nop(1);
  27   2               }
  28   1               else
  29   1               {
  30   2                      Send_Dat=1;
  31   2                      nop(1);
  32   2                      Send_Dat=0;
  33   2                      nop(3);
  34   2                      
  35   2               }
  36   1      }          
  37          /*******************************************************************************
  38          * 函 数 名         : Send_24bits
  39          * 函数功能                 : 流水灯
  40          *******************************************************************************/
  41          void Send_24bits(unsigned char R,unsigned char G,unsigned char B)
  42          {
  43   1           uchar i,a;
  44   1               for(i=0;i<8;i=i+1)
  45   1               {       
  46   2                   RGB_BUF[i]=B>>i&0x01;
  47   2               }
  48   1               for(i=8;i<16;i=i+1)
  49   1               {
  50   2                   RGB_BUF[i]=R>>(i-8)&0x01;
  51   2               }
  52   1               for(i=16;i<24;i=i+1)
  53   1               {
  54   2                       RGB_BUF[i]=G>>(i-16)&0x01;
C51 COMPILER V9.01   COLOR                                                                 07/09/2019 14:48:14 PAGE 2   

  55   2               }
  56   1               for(a=0;a<4;a=a+1)     //这个for循环可以控制亮几个灯
  57   1               {
  58   2                  for(i=0;i<24;i=i+1)
  59   2                  {
  60   3                       Send_A_bit(RGB_BUF[23-i]);
  61   3                  }
  62   2                          Send_Dat=0;
  63   2                              nop(4);
  64   2               }
  65   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    186    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     24       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
